---
import ContactButton from "./ContactButton.astro"
import ThemeToggle from "./ThemeToggle.astro"
---

<div class="menu">
	<nav class="nav">
		<ul class="nav-list">
			<li>
				<a class="nav-link" href="#inicio">Inicio</a>
			</li>
			<li>
				<a class="nav-link" href="#proyectos">Proyectos</a>
			</li>
			<li>
				<a class="nav-link" href="#sobre mí">Sobre mí</a>
			</li>
			<li>
				<ContactButton class="contact-button" />
			</li>
		</ul>
	</nav>

	<ThemeToggle class="theme-toggle" />
</div>

<button aria-label="Abrir menú" class="menu-button">
	<span class="button-line"></span>
	<span class="button-line"></span>
</button>

<style>
	.menu {
		display: flex;
		align-items: center;
		column-gap: 20px;
	}

	.nav-list {
		display: flex;
		align-items: center;
		column-gap: 16px;
		padding-inline-start: 0;
	}

	.nav-list li {
		list-style: none;
	}

	.nav-link {
		padding: 4px 20px;
		font-weight: 700;
	}

	.menu-button {
		display: none;
	}

	@media screen and (max-width: 768px) {
		.menu {
			--header-block-size: 57px;
			position: absolute;
			inset-inline: 0;
			inset-block-start: var(--header-block-size);
			flex-direction: column;
			overflow-y: auto;
			row-gap: 32px;
			block-size: calc(100dvh - var(--header-block-size));
			background-color: var(--surface);
			visibility: hidden;
			opacity: 0;
			transform: translateX(100%);
			transition:
				visibility ease-in-out,
				opacity ease-in-out,
				transform ease-in-out,
				background-color;
			transition-duration: 300ms;
		}

		.nav {
			margin: auto;
			margin-block-end: 0;
		}

		.menu-active {
			visibility: visible;
			opacity: 1;
			transform: translateX(0);
		}

		.menu-button {
			--size: 32px;
			display: flex;
			flex-direction: column;
			gap: 8px;
			justify-content: center;
			align-items: center;
			inline-size: var(--size);
			block-size: var(--size);
		}

		.button-line {
			inline-size: 80%;
			block-size: 3px;
			border-radius: 2px;
			background-color: currentColor;
			transform-origin: 7px;
			transition: transform 300ms cubic-bezier(0.68, -0.55, 0.27, 1.55);
		}

		.button-active > .button-line:nth-child(1) {
			transform: rotateZ(45deg) translate(2px);
		}

		.button-active > .button-line:nth-child(2) {
			transform: rotateZ(-45deg) translate(2px);
		}

		.nav-list {
			flex-direction: column;
			row-gap: 16px;
		}

		.nav-link {
			font-size: 2.5rem;
			font-family: "Clash Display";
		}

		.contact-button {
			font-size: 1.2rem;
			padding: 10px 24px;
		}

		.theme-toggle {
			margin-block-end: auto;
		}
	}

	@media (hover: hover) {
		.nav-link {
			color: hsl(var(--text-hsl) / 0.7);
			transition: color 300ms;
		}

		.nav-link:hover {
			color: initial;
		}
	}
</style>

<script>
	const menu = document.querySelector(".menu")!
	const menuButton = document.querySelector(".menu-button")!

	menuButton.addEventListener("click", () => {
		menu.classList.toggle("menu-active")
		menuButton.classList.toggle("button-active")
		document.body.classList.toggle("hide-overflow")
	})
</script>
